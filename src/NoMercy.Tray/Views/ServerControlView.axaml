<UserControl xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:NoMercy.Tray.ViewModels"
        x:Class="NoMercy.Tray.Views.ServerControlView"
        x:DataType="vm:ServerControlViewModel">

    <DockPanel Margin="16">
        <!-- Title -->
        <TextBlock DockPanel.Dock="Top"
                   Text="Server Control"
                   FontSize="20"
                   FontWeight="SemiBold"
                   Foreground="#F9FAFB"
                   Margin="0,0,0,16" />

        <!-- Status indicator -->
        <Border DockPanel.Dock="Top"
                Background="#1F2937"
                CornerRadius="8"
                Padding="16"
                Margin="0,0,0,16">
            <Grid ColumnDefinitions="Auto,*"
                  RowDefinitions="Auto,Auto,Auto,Auto,Auto">
                <!-- Status row -->
                <TextBlock Grid.Row="0" Grid.Column="0"
                           Text="Status:"
                           Foreground="#9CA3AF"
                           FontSize="13"
                           Margin="0,0,12,6"
                           VerticalAlignment="Center" />
                <StackPanel Grid.Row="0" Grid.Column="1"
                            Orientation="Horizontal"
                            Spacing="8"
                            Margin="0,0,0,6">
                    <Ellipse Width="10" Height="10"
                             VerticalAlignment="Center">
                        <Ellipse.Fill>
                            <SolidColorBrush Color="{Binding StatusColor}" />
                        </Ellipse.Fill>
                    </Ellipse>
                    <TextBlock Text="{Binding ServerStatus}"
                               Foreground="#F9FAFB"
                               FontSize="13"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center" />
                </StackPanel>

                <!-- Server Name -->
                <TextBlock Grid.Row="1" Grid.Column="0"
                           Text="Server:"
                           Foreground="#9CA3AF"
                           FontSize="13"
                           Margin="0,0,12,6" />
                <TextBlock Grid.Row="1" Grid.Column="1"
                           Text="{Binding ServerName}"
                           Foreground="#D1D5DB"
                           FontSize="13"
                           Margin="0,0,0,6" />

                <!-- Version -->
                <TextBlock Grid.Row="2" Grid.Column="0"
                           Text="Version:"
                           Foreground="#9CA3AF"
                           FontSize="13"
                           Margin="0,0,12,6" />
                <TextBlock Grid.Row="2" Grid.Column="1"
                           Text="{Binding Version}"
                           Foreground="#D1D5DB"
                           FontSize="13"
                           Margin="0,0,0,6" />

                <!-- Platform -->
                <TextBlock Grid.Row="3" Grid.Column="0"
                           Text="Platform:"
                           Foreground="#9CA3AF"
                           FontSize="13"
                           Margin="0,0,12,6" />
                <TextBlock Grid.Row="3" Grid.Column="1"
                           Text="{Binding Platform}"
                           Foreground="#D1D5DB"
                           FontSize="13"
                           Margin="0,0,0,6" />

                <!-- Uptime -->
                <TextBlock Grid.Row="4" Grid.Column="0"
                           Text="Uptime:"
                           Foreground="#9CA3AF"
                           FontSize="13"
                           Margin="0,0,12,0" />
                <TextBlock Grid.Row="4" Grid.Column="1"
                           Text="{Binding Uptime}"
                           Foreground="#D1D5DB"
                           FontSize="13" />
            </Grid>
        </Border>

        <!-- Update banner -->
        <Border DockPanel.Dock="Top"
                IsVisible="{Binding UpdateAvailable}"
                Background="#1E3A5F"
                CornerRadius="8"
                Padding="16"
                Margin="0,0,0,16">
            <Grid ColumnDefinitions="*,Auto">
                <TextBlock Grid.Column="0"
                           Text="{Binding LatestVersion, StringFormat='Update available: v{0}'}"
                           Foreground="#93C5FD"
                           FontSize="13"
                           VerticalAlignment="Center" />
                <Button Grid.Column="1"
                        Content="Restart to update"
                        Click="OnApplyUpdate"
                        Background="#2563EB"
                        Foreground="White"
                        Padding="12,6"
                        CornerRadius="4" />
            </Grid>
        </Border>

        <!-- Auto-start toggle -->
        <Border DockPanel.Dock="Top"
                Background="#1F2937"
                CornerRadius="8"
                Padding="16"
                Margin="0,0,0,16">
            <Grid ColumnDefinitions="*,Auto">
                <TextBlock Grid.Column="0"
                           Text="Start on boot"
                           Foreground="#D1D5DB"
                           FontSize="13"
                           VerticalAlignment="Center" />
                <CheckBox x:Name="AutoStartCheckBox"
                          Grid.Column="1"
                          IsChecked="{Binding AutoStartEnabled}"
                          Click="OnAutoStartToggle"
                          VerticalAlignment="Center" />
            </Grid>
        </Border>

        <!-- Action status -->
        <TextBlock DockPanel.Dock="Bottom"
                   Text="{Binding ActionStatus}"
                   Foreground="#9CA3AF"
                   FontSize="12"
                   Margin="0,8,0,0"
                   HorizontalAlignment="Center" />

        <!-- Control buttons -->
        <StackPanel DockPanel.Dock="Bottom"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Spacing="12"
                    Margin="0,8,0,0">
            <Button x:Name="OpenAppButton"
                    Content="Open App"
                    Width="120"
                    HorizontalContentAlignment="Center"
                    IsEnabled="{Binding IsServerRunning}"
                    Click="OnOpenAppClick"
                    Background="#7C3AED"
                    Foreground="White" />

            <Button x:Name="StartButton"
                    Content="Start Server"
                    Width="120"
                    HorizontalContentAlignment="Center"
                    IsEnabled="{Binding IsServerStopped}"
                    Click="OnStartClick"
                    Background="#16A34A"
                    Foreground="White" />

            <Button x:Name="StopButton"
                    Content="Stop Server"
                    Width="120"
                    HorizontalContentAlignment="Center"
                    IsEnabled="{Binding IsServerRunning}"
                    Click="OnStopClick"
                    Background="#DC2626"
                    Foreground="White" />

            <Button x:Name="RestartButton"
                    Content="Restart Server"
                    Width="120"
                    HorizontalContentAlignment="Center"
                    IsEnabled="{Binding IsServerRunning}"
                    Click="OnRestartClick"
                    Background="#2563EB"
                    Foreground="White" />

            <Button x:Name="RefreshButton"
                    Content="Refresh"
                    Width="120"
                    HorizontalContentAlignment="Center"
                    Click="OnRefreshClick" />
        </StackPanel>

        <!-- Spacer -->
        <Panel />
    </DockPanel>
</UserControl>
